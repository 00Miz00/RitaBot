"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(s,l){function i(){return{eventHasOccured:!1,data:null}}function d(e,t){if(e)for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])}function o(e,t){w.contentWindow.postMessage(JSON.stringify({type:e,data:t}),D)}function a(e){e.parentNode.removeChild(e)}function u(e){_&&O&&C&&(e===je?(O.innerHTML=Ke,d(C,{padding:"16px"}),C.setAttribute("aria-label",F.translations.ariaCloseWcLabel)):(O.innerHTML=Ye,d(C,{padding:"12px 10px 8px"}),C.setAttribute("aria-label",F.translations.ariaOpenWcLabel)))}function p(){_&&(a(_),_=null)}function c(e){var t=0<arguments.length&&void 0!==e?e:{},n="none"===w.style.display;n!==t.widgetShouldMinimize&&(n?(w.style.display="block",F.webChatVisibility.widget="block",u(je)):(w.style.display="none",F.webChatVisibility.widget="none",u(We)),tt("widgetToggle",{visible:"block"===F.webChatVisibility.widget}),F.widgetOptions.showLauncher&&!F.widgetOptions.showCloseButton&&(C.style.display="block"===F.webChatVisibility.widget?"none":"block"),o(he,{widgetHasMinimized:!n,trigger:t.trigger}),Xe())}function r(){Je=!0,$e()}function f(e){var t=F.cssConfig,n=t.launcherBgColor,i=t.launcherTextColor,o=t.notificationBgColor,a=t.notificationTextColor,r=t.focusRingColor;Ge.background=n,Ge.outlineColor=r,ze.background=o,ze.color=a;var s=/fill=".+"\s/,l='fill="'.concat(i,'" ');if(Ke=Ke.replace(s,l),Ye=Ye.replace(s,l),e){d(S,Ge),d(A,ze);var c="none"===w.style.display?We:je;u(c)}_&&!F.widgetOptions.showLauncher&&p()}function g(){var e=s.helpshiftConfig.widgetSelector;return e&&l.querySelector(e)||null}function h(e){var t;f(),function(){var e=F.widgetOptions.showLauncher?"100px":U;switch(F.widgetOptions.position){case G:Me.top="auto",Me.bottom=U,Me.left="auto",Me.right=U,Ue.top="auto",Ue.bottom=e,Ue.left="auto",Ue.right=U,ze.right="4px",ze.left="auto";break;case M:Me.top="auto",Me.bottom=U,Me.left=U,Me.right="auto",Ue.top="auto",Ue.bottom=e,Ue.left=U,Ue.right="auto",ze.left="4px",ze.right="auto";break;case V:Me.top=U,Me.bottom="auto",Me.left=U,Me.right="auto",Ue.top=e,Ue.bottom="auto",Ue.left=U,Ue.right="auto",ze.left="4px",ze.right="auto";break;case P:Me.top=U,Me.bottom="auto",Me.left="auto",Me.right=U,Ue.top=e,Ue.bottom="auto",Ue.left="auto",Ue.right=U,ze.right="4px",ze.left="auto"}d(_,Me),d(w,Ue)}(),t=e,g()?d(w,Be):t.fullScreen?d(w,Fe):d(w,Ue),"number"==typeof F.widgetOptions.zIndex&&(d(w,{zIndex:F.widgetOptions.zIndex+10}),d(_,{zIndex:F.widgetOptions.zIndex}))}function b(n){if(!n.widgetEnabled)return w&&(a(w),w=null),void p();var e;et(),e=n,F.cssConfig=e.cssConfig,F.widgetOptions.fullScreen=e.fullScreen,F.translations=e.translations,h(n);var t,i=!F.widgetOptions.showLauncher;i&&r(),i||_||((t=l.createElement("iframe")).setAttribute("role","none"),d(t,Me),"number"==typeof F.widgetOptions.zIndex&&d(t,{zIndex:F.widgetOptions.zIndex}),(_=t).onload=function(){var e=l.createElement("meta");e.setAttribute("charset","utf-8"),_.contentDocument.head.appendChild(e);var t=l.createElement("title");t.innerText="Support Web Chat Launcher",_.contentDocument.head.appendChild(t),(S=l.createElement("button")).setAttribute("aria-label",F.translations.ariaOpenWcLabel),(O=l.createElement("span")).innerHTML=Ye,A=l.createElement("span"),d(A,ze),Xe(),S.appendChild(A),S.appendChild(O),S.addEventListener("mouseenter",function(){d(S,{background:F.cssConfig.launcherBgColorLight})}),S.addEventListener("mouseleave",function(){d(S,{background:F.cssConfig.launcherBgColor})}),S.addEventListener("focus",function(){F.mouseInteraction?F.mouseInteraction=!1:d(S,{outlineWidth:"4px"})}),S.addEventListener("blur",function(){d(S,{outlineWidth:"0"})}),S.addEventListener("mousedown",function(){F.mouseInteraction=!0}),d(S,Ge),(C=S).addEventListener("click",function(){c()}),_.contentWindow.document.addEventListener("keydown",function(e){var t="none"===w.style.display;e.shiftKey&&e.keyCode===qe&&!t?(e.preventDefault(),_.blur(),w.focus(),o(ge,{forward:!1})):e.keyCode!==qe||t||(e.preventDefault(),_.blur(),w.focus(),o(ge,{forward:!0}))}),_.contentDocument.body.appendChild(C),r(),n.widgetShouldAutoOpen&&c({widgetShouldMinimize:!1})},l.body.appendChild(_))}function E(e){o(be,e)}function y(e){return"function"==typeof nt[e]}function m(e){for(var t in Ne)if(Ne[t]===e)return 1}function v(e){return"object"===_typeof(e)&&!Array.isArray(e)&&null!==e}function t(e){var t={};if(!v(e))return t;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];v(i)&&"string"==typeof i.type&&i.type&&void 0!==i.value&&(t[n]={type:i.type,value:i.value})}return t}var w,C,A,O,_,S,x,e,L,n="https://webchat.helpshift.com".split("://"),T="".concat(n[0],"://"),k=s.helpshiftConfig.appId,N=n[1],I=k.split("_app_")[0].slice(0,8)+k.slice(-16),R="".concat(T).concat(I,".").concat(N),H="parent=".concat(encodeURIComponent(s.location.origin)),D="".concat(R).concat("/html/index.html?v=2.61.1","&").concat(H),V="top-left",P="top-right",M="bottom-left",G="bottom-right",U="28px",F={unreadCount:0,widgetOptions:{showLauncher:!0,showCloseButton:!0,fullScreen:!1,position:G},cssConfig:{},globalApiEventHandler:null,apiEvents:[],webChatVisibility:{launcher:"block",widget:"none",hiddenByApi:!1},translations:{},mouseInteraction:!1},B="sdk-js-loaded",z="sdk-config-loaded",j="sdk-toggle-messenger",W="sdk-reset",K="sdk-update-unread-count",Y="sdk-event-chat-end",q="sdk-event-conversation-start",J="sdk-event-conversation-end",Z="sdk-event-conversation-reopened",Q="sdk-event-conversation-resolved",X="sdk-event-conversation-rejected",$="sdk-event-message-add",ee="sdk-event-conversation-status",te="sdk-ui-config-updated",ne="sdk-event-csat-submit",ie="sdk-update-ui-config-errors",oe="sdk-user-changed-via-re-engagement",ae="sdk-focus-launcher",re="sdk-event-set-local-storage-data",se="sdk-event-remove-local-storage-data",le="sdk-event-ui-config-change",ce="sdk-event-push-token-sync",de="sdk-event-user-auth-failure",ue="sdk-event-remove-anonymous-user",pe="sdk-event-safe-area-color",fe="sdk-event-chat-header-height",ge="cmd-focus-webchat",he="cmd-messenger-toggled",be="cmd-set-config",Ee="cmd-set-initial-user-message",ye="cmd-set-greeting-message",me="cmd-set-language",ve="cmd-set-cif",we="cmd-set-metadata",Ce="cmd-replace-cif",Ae="cmd-set-execute-proactive-chat-rules",Oe="cmd-update-ui-config",_e="cmd-set-full-privacy",Se="cmd-update-helpshift-config",xe="cmd-set-parent-page-visibility",Le="cmd-set-disable-pfi",Te="cmd-set-enable-pfi",ke="cmd-toggle-poller-status",Ne={CHAT_END:"chatEnd",CONVERSATION_START:"conversationStart",MESSAGE_ADD:"messageAdd",CSAT_SUBMIT:"csatSubmit",CONVERSATION_END:"conversationEnd",CONVERSATION_REOPENED:"conversationReopened",CONVERSATION_RESOLVED:"conversationResolved",CONVERSATION_REJECTED:"conversationRejected",NEW_UNREAD_MESSAGES:"newUnreadMessages",USER_CHANGED:"userChanged",WIDGET_TOGGLE:"widgetToggle",CONVERSATION_STATUS:"conversationStatus",GLOBAL_API_EVENT:"globalApiEvent",USER_AUTH_FAILURE:"userAuthFailure",SET_LOCAL_STORAGE_DATA:"setLocalStorageData",REMOVE_LOCAL_STORAGE_DATA:"removeLocalStorageData",UI_CONFIG_CHANGE:"uiConfigChange",PUSH_TOKEN_SYNC:"pushTokenSync",REMOVE_ANONYMOUS_USER:"removeAnonymousUser",SAFE_AREA_COLOR:"safeAreaColor",WEB_SDK_CONFIG_LOAD:"webSdkConfigLoad",CHAT_HEADER_HEIGHT:"chatHeaderHeight"},Ie=[Ne.SET_LOCAL_STORAGE_DATA,Ne.REMOVE_LOCAL_STORAGE_DATA,Ne.UI_CONFIG_CHANGE,Ne.PUSH_TOKEN_SYNC,Ne.REMOVE_ANONYMOUS_USER,Ne.SAFE_AREA_COLOR,Ne.WEB_SDK_CONFIG_LOAD,Ne.CHAT_HEADER_HEIGHT],Re="API name is not passed with the Helpshift call",He="The API name passed with the Helpshift call is not supported",De="HelpshiftUiConfigError: ",Ve="API",Pe="RESET",Me={position:"fixed",bottom:"28px",right:"28px",width:"60px",height:"60px","z-index":"9999991",border:"none",overflow:"hidden"},Ge={position:"absolute",top:0,left:0,width:"60px",height:"60px",background:"#f66","border-radius":"50%",cursor:"pointer","box-sizing":"border-box",padding:"12px 10px 8px",border:"none","outline-offset":"-4px","outline-width":"0","outline-style":"solid","outline-color":"rgba(0, 103, 244, .4)"},Ue={position:"fixed",bottom:"100px",right:"28px","min-height":"320px","max-height":"540px","min-width":"320px","max-width":"340px",height:"calc(100% - 52px - 53px)",width:"100%",border:"none","border-radius":"8px","z-index":"9999999",overflow:"hidden",transform:"translate3d(0,0,0)","box-shadow":"0 4px 32px rgba(0, 0, 0, .2)"},Fe={position:"fixed",top:"0px",left:"0px",bottom:"0px",right:"0px","min-height":"0","max-height":"none","min-width":"0","max-width":"none",width:"100%",height:"100%",border:"none",margin:0,padding:0,overflow:"hidden","z-index":"9999999","border-radius":"0"},Be={position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px","min-height":"0","max-height":"none","min-width":"0","max-width":"none",width:"100%",height:"100%",border:"none",margin:0,padding:0,overflow:"hidden","z-index":"9999999"},ze={"background-color":"#fa3e3e","border-radius":"50%",color:"white",width:"20px",height:"20px","line-height":"20px","text-align":"center","font-size":"12px",position:"absolute",top:"0px",right:"4px","font-family":"sans-serif"},je="CLOSE",We="MESSENGER",Ke='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%"\n                        viewBox="0 0 560 560">\n                        <polygon fill="#FFFFFF" fill-rule="evenodd"\n                          points="470 127.997 432.003 90 280 242.003 127.997 90 90\n                                  127.997 242.003 280 90 432.003 127.997 470 280 317.997\n                                  432.003 470 470 432.003 317.997 280"/>\n                      </svg>',Ye='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%"\n                          viewBox="0 0 560 560">\n                          <g fill="#FFFFFF" fill-rule="evenodd" transform="translate(60 77)">\n                            <path d="M363.373365,0 L10.16125,0 C5.42701923,0 0,3.96105769\n                                    0,8.62971154 L0,235.205385 C0,239.872981 5.42701923,244.326923\n                                    10.16125,244.326923 L70.8653846,244.326923\n                                    L70.8653846,338.349423 L166.193077,244.326923\n                                    L363.373365,244.326923 C368.108654,244.326923\n                                    371.25,239.872981 371.25,235.205385\n                                    L371.25,8.62971154 C371.25,3.96105769 368.107596,\n                                    0 363.373365,0 L363.373365,0 Z"/>\n                            <path d="M431.957308,66.6346154 L397.692308,66.6346154\n                                    L397.692308,242.814423 C397.692308,259.72375\n                                    390.378365,270.769231 371.089231,270.769231\n                                    L179.909231,270.769231 L138.759712,312.019231\n                                    L275.929712,312.019231 L371.25,406.153846\n                                    L371.25,312.019231 L431.957308,312.019231\n                                    C436.693654,312.019231 440,307.511346\n                                    440,302.836346 L440,76.2627885 C440,71.5941346\n                                    436.693654,66.6346154 431.957308,66.6346154\n                                    L431.957308,66.6346154 Z"/>\n                          </g>\n                        </svg>',qe=9,Je=!1,Ze={title:l.title,url:s.location.href,origin:s.location.origin,width:Math.max(l.documentElement.clientWidth,s.innerWidth||0),height:Math.max(l.documentElement.clientHeight,s.innerHeight||0)},Qe=_defineProperty({},Ne.USER_CHANGED,i()),Xe=function(){A&&(0!==F.unreadCount&&"none"===w.style.display?(A.innerHTML=F.unreadCount,d(A,{display:"inline"})):(A.innerHTML="",d(A,{display:"none"})))},$e=function(){it.forEach(function(e){"function"==typeof e&&e()}),it=[]},et=function(){var e=window.helpshiftConfig.widgetOptions||{};"boolean"==typeof e.showLauncher&&(F.widgetOptions.showLauncher=e.showLauncher),"boolean"==typeof e.showCloseButton&&(F.widgetOptions.showCloseButton=e.showCloseButton),"boolean"==typeof e.fullScreen&&(F.widgetOptions.fullScreen=e.fullScreen),"string"==typeof e.position&&(F.widgetOptions.position=e.position),"number"==typeof e.zIndex&&(F.widgetOptions.zIndex=e.zIndex)},tt=function(t,n){var e,i=!1;F.globalApiEventHandler&&-1===Ie.indexOf(t)&&F.globalApiEventHandler(_defineProperty({},t,n||null)),F.apiEvents.forEach(function(e){e.eventName===t&&(e.eventHandler(n),i=!0)}),i||(e=Qe[t]&&Qe[t].data?_objectSpread({},Qe[t].data,{},n):n,Qe[t]={eventHasOccured:!0,data:e})},nt={init:function e(){if(document&&document.body){x&&clearTimeout(x);var t=l.getElementById("hs-web-sdk-iframe");if(function(){var t=!0;try{t=!!s.localStorage&&"function"==typeof localStorage.getItem&&"function"==typeof localStorage.setItem&&"function"==typeof localStorage.removeItem}catch(e){t=!1}return t}()&&!t){var n,i,o,a;et(),n=F.widgetOptions,i=n.showLauncher,o=n.showCloseButton,i&&o||(Ue.bottom=U),F.webChatVisibility.launcher=F.widgetOptions.showLauncher?"block":"none",(a=l.createElement("iframe")).setAttribute("role","none"),a.id="hs-web-sdk-iframe",a.src=D,d(a,{display:"none"}),w=a;var r=g();r?r.appendChild(w):l.body.appendChild(w),s.addEventListener("message",function(e){if(e.origin===R){var t,n,i,r;try{var o=JSON.parse(e.data);t=o.type,n=o.data}catch(e){return}switch(t){case B:E({clientConfig:s.helpshiftConfig,parentPageInfo:Ze});break;case oe:tt(Ne.USER_CHANGED,n.userInfo);break;case z:b(n.wmConfig),tt(Ne.WEB_SDK_CONFIG_LOAD),tt(Ne.CHAT_HEADER_HEIGHT,{height:52});break;case j:c({widgetShouldMinimize:n.minimized});break;case K:if(F.unreadCount=n.count,S&&F.unreadCount){var a=F.translations.ariaOpenWcLabel+", ";a+=F.translations.ariaWcBadgeLabel.replace("{{num}}",F.unreadCount),S.setAttribute("aria-label",a)}Xe(),tt(Ne.NEW_UNREAD_MESSAGES,{unreadCount:n.count});break;case W:F.unreadCount=0,Xe(),E({clientConfig:s.helpshiftConfig,parentPageInfo:Ze,trigger:Pe});break;case Y:tt(Ne.CHAT_END);break;case q:tt(Ne.CONVERSATION_START,{message:n.message});break;case J:tt(Ne.CONVERSATION_END);break;case Z:tt(Ne.CONVERSATION_REOPENED);break;case Q:tt(Ne.CONVERSATION_RESOLVED);break;case X:tt(Ne.CONVERSATION_REJECTED);break;case $:tt(Ne.MESSAGE_ADD,{type:n.type,body:n.body});break;case ne:tt(Ne.CSAT_SUBMIT,{rating:n.rating,additionalFeedback:n.review});break;case ae:w.blur(),_.focus(),S&&S.focus();break;case ee:tt(Ne.CONVERSATION_STATUS,n);break;case te:F.cssConfig=n.cssConfig,f(!0);break;case ie:i=n.errors,r=De,i.forEach(function(e){var t=e.set,n=e.value,i="Set = "+t,o=n?" | Value = "+n:"",a=" | Info = "+e.info;console.error(r+i+o+a)});break;case re:tt(Ne.SET_LOCAL_STORAGE_DATA,n);break;case se:tt(Ne.REMOVE_LOCAL_STORAGE_DATA,n);break;case le:tt(Ne.UI_CONFIG_CHANGE,n);break;case ce:tt(Ne.PUSH_TOKEN_SYNC,n);break;case de:$e(),tt(Ne.USER_AUTH_FAILURE,n);break;case ue:tt(Ne.REMOVE_ANONYMOUS_USER);break;case pe:tt(Ne.SAFE_AREA_COLOR,n);break;case fe:tt(Ne.CHAT_HEADER_HEIGHT,n)}}},!1)}}else x=setTimeout(e,500)},open:function(){F.webChatVisibility.hiddenByApi||c({widgetShouldMinimize:!1,trigger:Ve})},close:function(){F.webChatVisibility.hiddenByApi||c({widgetShouldMinimize:!0,trigger:Ve})},setInitialUserMessage:function(e){"string"==typeof e&&e.trim()&&o(Ee,{message:e,trigger:Ve})},setGreetingMessage:function(e){e&&"string"==typeof e&&o(ye,{message:e})},setLanguage:function(e){e&&"string"==typeof e&&o(me,{language:e})},addEventListener:function(e,t){if(m(e)&&t){if(e===Ne.GLOBAL_API_EVENT)return void(F.globalApiEventHandler=t);F.apiEvents.push({eventName:e,eventHandler:t});var n=Qe[e];n&&n.eventHasOccured&&(tt(e,n.data),Qe[e]=i())}},removeEventListener:function(t,n){if(m(t)&&n){if(t===Ne.GLOBAL_API_EVENT)return void(F.globalApiEventHandler=null);F.apiEvents=F.apiEvents.filter(function(e){return!(e.eventName===t&&e.eventHandler===n)})}},setCustomIssueFields:function(e){o(ve,{cifData:t(e)})},setCustomMetadata:function(e){e&&v(e)&&o(we,{metadata:e})},replaceCustomIssueFields:function(e){o(Ce,{cifData:t(e)})},setProactiveChatRules:function(e){o(Ae,{proactiveChatRules:e})},updateUiConfig:function(e){o(Oe,{uiConfig:e})},setFullPrivacy:function(e){o(_e,{enabled:0<arguments.length&&void 0!==e&&e})},updateHelpshiftConfig:function(){o(Se)},hide:function(){F.widgetOptions.showLauncher&&C&&"none"!==C.style.display&&(F.webChatVisibility.launcher=C.style.display,C.style.display="none"),w&&"none"!==w.style.display&&(F.webChatVisibility.widget=w.style.display,w.style.display="none"),F.webChatVisibility.hiddenByApi=!0},show:function(){w&&(w.style.display=F.webChatVisibility.widget,F.widgetOptions.showLauncher&&C&&(C.style.display=F.webChatVisibility.launcher),F.webChatVisibility.hiddenByApi=!1)},updateParentPageVisibility:function(e){o(xe,{parentPageIsVisible:!(0<arguments.length&&void 0!==e)||e})},disableConfigPeriodicFetch:function(){o(Le,{respectPfi:!1})},enableConfigPeriodicFetch:function(){o(Te)},togglePollerStatus:function(e){o(ke,{status:!(0<arguments.length&&void 0!==e)||e})}},it=(e=s.Helpshift,L=[],e&&Array.isArray(e.q)&&e.q.length&&e.q.forEach(function(e){for(var t=e.length,n=[],i=0;i<t;i++)n.push(e[i]);var o=n[0],a=n.slice(1);if(y(o)){var r=nt[o];L.push(r.bind.apply(r,_toConsumableArray([null].concat(a))))}}),L);s.Helpshift=function(e){if("string"!=typeof e)throw new Error(Re);if("function"!=typeof nt[e])throw new Error(He);for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(Je||"init"===e)nt[e].apply(null,n);else if(y(e)){var o;it.push((o=nt[e]).bind.apply(o,[null].concat(n)))}}}(window,document);
